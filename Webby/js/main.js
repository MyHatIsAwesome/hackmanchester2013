var logs_because_server_is_demented = {
  "447717214711": '[{"0":"116","id":"116","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Open the door","content":"Open the door","4":"VE_224835857","msg_id":"VE_224835857","5":"1382874874240","time":"1382874874240"},{"0":"117","id":"117","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"*opens the door*.","content":"*opens the door*.","4":"VE_224835857","msg_id":"VE_224835857","5":"1382874874266","time":"1382874874266"},{"0":"120","id":"120","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Get the floor","content":"Get the floor","4":"VI_205653211","msg_id":"VI_205653211","5":"1382874897971","time":"1382874897971"},{"0":"121","id":"121","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"The door. Somebody knocked.","content":"The door. Somebody knocked.","4":"VI_205653211","msg_id":"VI_205653211","5":"1382874897988","time":"1382874897988"},{"0":"126","id":"126","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"I am the one who knocks","content":"I am the one who knocks","4":"VE_224835929","msg_id":"VE_224835929","5":"1382874930764","time":"1382874930764"},{"0":"127","id":"127","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Are you the admin?","content":"Are you the admin?","4":"VE_224835929","msg_id":"VE_224835929","5":"1382874930782","time":"1382874930782"},{"0":"134","id":"134","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"How much wood could a woodchuck chuck if a woodchuck could chuck wood?","content":"How much wood could a woodchuck chuck if a woodchuck could chuck wood?","4":"VI_205653290","msg_id":"VI_205653290","5":"1382875021951","time":"1382875021951"},{"0":"135","id":"135","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"A woodchuck would chuck as much wood as a woodchuck could chuck if a woodchuck could chuck wood.","content":"A woodchuck would chuck as much wood as a woodchuck could chuck if a woodchuck could chuck wood.","4":"VI_205653290","msg_id":"VI_205653290","5":"1382875021983","time":"1382875021983"},{"0":"138","id":"138","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"A woodchuck would chuck no amount of wood because a woodchuck can\'t chuck wood","content":"A woodchuck would chuck no amount of wood because a woodchuck can\'t chuck wood","4":"VE_224836161","msg_id":"VE_224836161","5":"1382875072233","time":"1382875072233"},{"0":"139","id":"139","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"But if a woodchuck COULD how much wood would a woodchuck chuck?","content":"But if a woodchuck COULD how much wood would a woodchuck chuck?","4":"VE_224836161","msg_id":"VE_224836161","5":"1382875072257","time":"1382875072257"},{"0":"140","id":"140","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"The question is not how much wood would a woodchuck chuck but whether a woodchuck should chuck would","content":"The question is not how much wood would a woodchuck chuck but whether a woodchuck should chuck would","4":"VE_224836243","msg_id":"VE_224836243","5":"1382875141021","time":"1382875141021"},{"0":"141","id":"141","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"I believe you are a bot.","content":"I believe you are a bot.","4":"VE_224836243","msg_id":"VE_224836243","5":"1382875141038","time":"1382875141038"},{"0":"142","id":"142","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"That\'s it I\'m not talking to you no more","content":"That\'s it I\'m not talking to you no more","4":"VE_224836291","msg_id":"VE_224836291","5":"1382875183793","time":"1382875183793"},{"0":"143","id":"143","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"You could be giving me automated responses.","content":"You could be giving me automated responses.","4":"VE_224836291","msg_id":"VE_224836291","5":"1382875183808","time":"1382875183808"},{"0":"144","id":"144","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"If they\'re automated then I wouldn\'t be involved","content":"If they\'re automated then I wouldn\'t be involved","4":"VI_205653452","msg_id":"VI_205653452","5":"1382875268547","time":"1382875268547"},{"0":"145","id":"145","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"What do you think you need to learn?","content":"What do you think you need to learn?","4":"VI_205653452","msg_id":"VI_205653452","5":"1382875268563","time":"1382875268563"},{"0":"146","id":"146","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"How to halve an apple with my bare hands","content":"How to halve an apple with my bare hands","4":"VI_205653493","msg_id":"VI_205653493","5":"1382875320539","time":"1382875320539"},{"0":"147","id":"147","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"That\'s a good thought.","content":"That\'s a good thought.","4":"VI_205653493","msg_id":"VI_205653493","5":"1382875320553","time":"1382875320553"},{"0":"148","id":"148","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Tell me. Who lives in a pineapple under the sea?","content":"Tell me. Who lives in a pineapple under the sea?","4":"VI_205653525","msg_id":"VI_205653525","5":"1382875374791","time":"1382875374791"},{"0":"149","id":"149","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Spongebobble.","content":"Spongebobble.","4":"VI_205653525","msg_id":"VI_205653525","5":"1382875374816","time":"1382875374816"},{"0":"150","id":"150","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Is this spongebob fellow absorbent and perhaps porous and yellowm","content":"Is this spongebob fellow absorbent and perhaps porous and yellowm","4":"VE_224837131","msg_id":"VE_224837131","5":"1382875494219","time":"1382875494219"},{"0":"151","id":"151","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"You seem to have me confused with someone else.","content":"You seem to have me confused with someone else.","4":"VE_224837131","msg_id":"VE_224837131","5":"1382875494242","time":"1382875494242"},{"0":"152","id":"152","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"When does a pile become a mound?","content":"When does a pile become a mound?","4":"VE_224837286","msg_id":"VE_224837286","5":"1382875584342","time":"1382875584342"},{"0":"153","id":"153","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Nobody knows, it\'s one of lifes greatest mysteries.","content":"Nobody knows, it\'s one of lifes greatest mysteries.","4":"VE_224837286","msg_id":"VE_224837286","5":"1382875584360","time":"1382875584360"},{"0":"154","id":"154","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Prepare for unforseen consequences","content":"Prepare for unforseen consequences","4":"VE_224837637","msg_id":"VE_224837637","5":"1382875750278","time":"1382875750278"},{"0":"155","id":"155","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Pokemon Red, Gold or Black?","content":"Pokemon Red, Gold or Black?","4":"VE_224837637","msg_id":"VE_224837637","5":"1382875750302","time":"1382875750302"},{"0":"156","id":"156","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Orange","content":"Orange","4":"VI_205653838","msg_id":"VI_205653838","5":"1382875792663","time":"1382875792663"},{"0":"157","id":"157","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Seven.","content":"Seven.","4":"VI_205653838","msg_id":"VI_205653838","5":"1382875792677","time":"1382875792677"},{"0":"158","id":"158","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Heavy","content":"Heavy","4":"VE_224837732","msg_id":"VE_224837732","5":"1382875822872","time":"1382875822872"},{"0":"159","id":"159","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Heavy?","content":"Heavy?","4":"VE_224837732","msg_id":"VE_224837732","5":"1382875822903","time":"1382875822903"},{"0":"160","id":"160","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Heavy!","content":"Heavy!","4":"VI_205653874","msg_id":"VI_205653874","5":"1382875844253","time":"1382875844253"},{"0":"161","id":"161","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"Crushingly so.","content":"Crushingly so.","4":"VI_205653874","msg_id":"VI_205653874","5":"1382875844290","time":"1382875844290"},{"0":"162","id":"162","1":"447717214711","from":"447717214711","2":"447860033078","to":"447860033078","3":"Tell Nathan to hurry up fixing the server","content":"Tell Nathan to hurry up fixing the server","4":"VI_205653938","msg_id":"VI_205653938","5":"1382875911030","time":"1382875911030"},{"0":"163","id":"163","1":"BOT","from":"BOT","2":"447717214711","to":"447717214711","3":"What?","content":"What?","4":"VI_205653938","msg_id":"VI_205653938","5":"1382875911041","time":"1382875911041"}]',
  "447905309185": '[{"0":"92","id":"92","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Tester","content":"Tester","4":"VE_224824715","msg_id":"VE_224824715","5":"1382864493733","time":"1382864493733"},{"0":"93","id":"93","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Gestern?","content":"Gestern?","4":"VE_224824715","msg_id":"VE_224824715","5":"1382864493758","time":"1382864493758"},{"0":"94","id":"94","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Wee!","content":"Wee!","4":"VI_205640477","msg_id":"VI_205640477","5":"1382864520631","time":"1382864520631"},{"0":"95","id":"95","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Wee?","content":"Wee?","4":"VI_205640477","msg_id":"VI_205640477","5":"1382864520659","time":"1382864520659"},{"0":"100","id":"100","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Hello my friend ","content":"Hello my friend ","4":"VE_224835040","msg_id":"VE_224835040","5":"1382874214679","time":"1382874214679"},{"0":"101","id":"101","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"I\'m not your friend.","content":"I\'m not your friend.","4":"VE_224835040","msg_id":"VE_224835040","5":"1382874214704","time":"1382874214704"},{"0":"102","id":"102","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Hello friend ","content":"Hello friend ","4":"VE_224835438","msg_id":"VE_224835438","5":"1382874522048","time":"1382874522048"},{"0":"103","id":"103","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"How are you friend?","content":"How are you friend?","4":"VE_224835438","msg_id":"VE_224835438","5":"1382874522070","time":"1382874522070"},{"0":"104","id":"104","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Hellloo friend. ","content":"Hellloo friend. ","4":"VI_205653066","msg_id":"VI_205653066","5":"1382874646417","time":"1382874646417"},{"0":"105","id":"105","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Hello! How are you today?","content":"Hello! How are you today?","4":"VI_205653066","msg_id":"VI_205653066","5":"1382874646442","time":"1382874646442"},{"0":"106","id":"106","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Good thanks you? ","content":"Good thanks you? ","4":"VE_224835722","msg_id":"VE_224835722","5":"1382874745889","time":"1382874745889"},{"0":"107","id":"107","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"I\'m fine.","content":"I\'m fine.","4":"VE_224835722","msg_id":"VE_224835722","5":"1382874745914","time":"1382874745914"},{"0":"108","id":"108","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Awesome beans! ","content":"Awesome beans! ","4":"VE_224835772","msg_id":"VE_224835772","5":"1382874779926","time":"1382874779926"},{"0":"109","id":"109","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"How many people can you talk to at once.","content":"How many people can you talk to at once.","4":"VE_224835772","msg_id":"VE_224835772","5":"1382874779952","time":"1382874779952"},{"0":"110","id":"110","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"5 I think. ","content":"5 I think. ","4":"VI_205653170","msg_id":"VI_205653170","5":"1382874817028","time":"1382874817028"},{"0":"111","id":"111","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"You\'re welcome. So what time?","content":"You\'re welcome. So what time?","4":"VI_205653170","msg_id":"VI_205653170","5":"1382874817068","time":"1382874817068"},{"0":"114","id":"114","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"What time what? ","content":"What time what? ","4":"VI_205653186","msg_id":"VI_205653186","5":"1382874865578","time":"1382874865578"},{"0":"115","id":"115","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"It\'s time for me to leave. Good bye.","content":"It\'s time for me to leave. Good bye.","4":"VI_205653186","msg_id":"VI_205653186","5":"1382874865617","time":"1382874865617"},{"0":"118","id":"118","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"No don\'t go!","content":"No don\'t go!","4":"VI_205653209","msg_id":"VI_205653209","5":"1382874893619","time":"1382874893619"},{"0":"119","id":"119","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Please, I must!","content":"Please, I must!","4":"VI_205653209","msg_id":"VI_205653209","5":"1382874893661","time":"1382874893661"},{"0":"124","id":"124","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"You can\'t not now!","content":"You can\'t not now!","4":"VI_205653230","msg_id":"VI_205653230","5":"1382874927450","time":"1382874927450"},{"0":"125","id":"125","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"I can, but I want to know if you understand me enough to tell me.","content":"I can, but I want to know if you understand me enough to tell me.","4":"VI_205653230","msg_id":"VI_205653230","5":"1382874927466","time":"1382874927466"},{"0":"130","id":"130","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Tell you what? You must tell me!","content":"Tell you what? You must tell me!","4":"VE_224835988","msg_id":"VE_224835988","5":"1382874978906","time":"1382874978906"},{"0":"131","id":"131","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"I don\'t know.","content":"I don\'t know.","4":"VE_224835988","msg_id":"VE_224835988","5":"1382874978923","time":"1382874978923"},{"0":"164","id":"164","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Test test","content":"Test test","4":"VI_205656232","msg_id":"VI_205656232","5":"1382879422301","time":"1382879422301"},{"0":"165","id":"165","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Test me.","content":"Test me.","4":"VI_205656232","msg_id":"VI_205656232","5":"1382879422346","time":"1382879422346"},{"0":"166","id":"166","1":"447905309185","from":"447905309185","2":"447860033078","to":"447860033078","3":"Woo!","content":"Woo!","4":"VE_224842649","msg_id":"VE_224842649","5":"1382879456516","time":"1382879456516"},{"0":"167","id":"167","1":"BOT","from":"BOT","2":"447905309185","to":"447905309185","3":"Woo who.","content":"Woo who.","4":"VE_224842649","msg_id":"VE_224842649","5":"1382879456550","time":"1382879456550"}]',
  "447527156515": '[{"0":"91","id":"91","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"\nWant some Cleverlove or a Cleverfight? Try the Cleverme app for iOS!","content":"\nWant some Cleverlove or a Cleverfight? Try the Cleverme app for iOS!","4":"","msg_id":"","5":"1382859262280","time":"1382859262280"},{"0":"96","id":"96","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"What did you do","content":"What did you do","4":"VE_224824816","msg_id":"VE_224824816","5":"1382864667205","time":"1382864667205"},{"0":"97","id":"97","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"I went to Chicago.","content":"I went to Chicago.","4":"VE_224824816","msg_id":"VE_224824816","5":"1382864667231","time":"1382864667231"},{"0":"98","id":"98","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"Awfully abrupt","content":"Awfully abrupt","4":"VE_224827626","msg_id":"VE_224827626","5":"1382867281024","time":"1382867281024"},{"0":"99","id":"99","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"You\'re awful!","content":"You\'re awful!","4":"VE_224827626","msg_id":"VE_224827626","5":"1382867281060","time":"1382867281060"},{"0":"112","id":"112","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"Hello","content":"Hello","4":"VI_205653187","msg_id":"VI_205653187","5":"1382874850314","time":"1382874850314"},{"0":"113","id":"113","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"How are you?","content":"How are you?","4":"VI_205653187","msg_id":"VI_205653187","5":"1382874850342","time":"1382874850342"},{"0":"122","id":"122","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"Im good. How are you","content":"Im good. How are you","4":"VE_224835887","msg_id":"VE_224835887","5":"1382874907503","time":"1382874907503"},{"0":"123","id":"123","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"Decent. Thank you for asking.","content":"Decent. Thank you for asking.","4":"VE_224835887","msg_id":"VE_224835887","5":"1382874907526","time":"1382874907526"},{"0":"128","id":"128","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"What are you upto today","content":"What are you upto today","4":"VE_224835960","msg_id":"VE_224835960","5":"1382874967335","time":"1382874967335"},{"0":"129","id":"129","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"Nothing much. Say, is it true that there is a third hidden person in this chat?","content":"Nothing much. Say, is it true that there is a third hidden person in this chat?","4":"VE_224835960","msg_id":"VE_224835960","5":"1382874967386","time":"1382874967386"},{"0":"132","id":"132","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"Well 4 if u count the nsa and the logging software we are using","content":"Well 4 if u count the nsa and the logging software we are using","4":"VI_205653283","msg_id":"VI_205653283","5":"1382875012585","time":"1382875012585"},{"0":"133","id":"133","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"No I don\'t think you are accusing me of lies. I was a fool. We are all at times.","content":"No I don\'t think you are accusing me of lies. I was a fool. We are all at times.","4":"VI_205653283","msg_id":"VI_205653283","5":"1382875012612","time":"1382875012612"},{"0":"136","id":"136","1":"447527156515","from":"447527156515","2":"447860033078","to":"447860033078","3":"Hello","content":"Hello","4":"VI_205653311","msg_id":"VI_205653311","5":"1382875041261","time":"1382875041261"},{"0":"137","id":"137","1":"BOT","from":"BOT","2":"447527156515","to":"447527156515","3":"How are you?","content":"How are you?","4":"VI_205653311","msg_id":"VI_205653311","5":"1382875041278","time":"1382875041278"}]'
}

$(document).ready(function(){
  debugger
  window.$form = $("#phoneform")
  window.$phone = $("#inputPhone")
  window.$conversation = $("#conversation")
  window.$msgHist = $("#msgHist")

  $form.on("submit", function(){
    get_conversation( $phone.val() )
    return false
  })
})

function get_conversation( phone )
{
  $msgHist.text(phone)

<<<<<<< HEAD
  var data = logs_because_server_is_demented[phone]
  if( data )
  {
    data = JSON.parse(data)
    render_conversation(data)
  }
  else
  {
    alert( "Phone number '"+phone+"' has no records")
  }

  // cursed code (cut it out cut it out!)
  // $.ajax({
  //   url: "/log.php",
  //   data: {phone:phone},
  //   dataType: "json",
  //   success: render_conversation,
  //   error: function( jqxhr, status, error ){
  //     alert("Error getting conversation for '"+phone+"' ("+error+")")
  //   }
  // })
=======
  $.ajax({
    url: "../log.php",
    data: {phone:phone},
    dataType: "json",
    success: render_conversation,
    error: function( jqxhr, status, error ){
      alert("Error getting conversation for '"+phone+"' ("+error+")")
    }
  })
>>>>>>> 43defa92a06b44914d7b12b571d0c5c84eaf8bbc
}

function render_conversation( data )
{
  console.log(data);
  $conversation.empty()
  for( var i=0, msg; msg=data[i]; i++ )
  {
    var date = new Date(parseInt(msg.time))
    var hours = date.getHours()
    var minutes = date.getMinutes()
    hours = hours < 10 ? "0"+hours : hours
    minutes = minutes < 10 ? "0"+minutes : minutes

    var $msg = $("<div/>").addClass("message")
    msg.from == "BOT" && $msg.addClass("bot")

    $("<span/>").addClass("from").text(msg.from).appendTo($msg)
    $("<span/>").addClass("time").text( hours+":"+minutes+(hours<12?"am":"pm") ).appendTo($msg)
    $("<p/>").addClass("content").text(msg.content).appendTo($msg)

    $conversation.append($msg)
  }
}
